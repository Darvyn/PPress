{% set pages = pagination if pagination is defined else view_history if view_history is defined else articles %}
{% set current_kwargs = {} %}
{% if kwargs is defined %}
    {% for key, value in kwargs.items() %}
        {% if key != 'page' %}
            {% set _ = current_kwargs.update({key: value}) %}
        {% endif %}
    {% endfor %}
{% endif %}

<div class="flex items-center justify-between">
    <div class="flex items-center space-x-2">
        {% if pages.has_prev %}
        <a href="{{ url_for(endpoint, page=pages.prev_num, **current_kwargs) }}" 
           class="px-3 py-1 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200">
            上一页
        </a>
        {% else %}
        <span class="px-3 py-1 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-400 dark:text-gray-600 bg-gray-50 dark:bg-gray-800 cursor-not-allowed">
            上一页
        </span>
        {% endif %}

        {% for page in pages.iter_pages() %}
            {% if page %}
                {% if page != pages.page %}
                <a href="{{ url_for(endpoint, page=page, **current_kwargs) }}" 
                   class="px-3 py-1 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200">
                    {{ page }}
                </a>
                {% else %}
                <span class="px-3 py-1 bg-blue-600 text-white rounded-lg">
                    {{ page }}
                </span>
                {% endif %}
            {% else %}
            <span class="px-2 text-gray-500 dark:text-gray-400">...</span>
            {% endif %}
        {% endfor %}

        {% if pages.has_next %}
        <a href="{{ url_for(endpoint, page=pages.next_num, **current_kwargs) }}" 
           class="px-3 py-1 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200">
            下一页
        </a>
        {% else %}
        <span class="px-3 py-1 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-400 dark:text-gray-600 bg-gray-50 dark:bg-gray-800 cursor-not-allowed">
            下一页
        </span>
        {% endif %}
    </div>

    <div class="text-sm text-gray-500 dark:text-gray-400">
        第 {{ pages.page }} 页 / 共 {{ pages.pages }} 页
    </div>
</div> 